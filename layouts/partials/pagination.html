{{- /* ABOUTME: Pagination navigation partial for list pages */ -}}
{{- /* ABOUTME: Displays prev/next links and page numbers when multiple pages exist */ -}}

{{- $paginator := . -}}
{{- if gt $paginator.TotalPages 1 -}}
<nav class="pagination" aria-label="Page navigation">
	<ul class="pagination-list">
		{{- /* Previous page link */ -}}
		{{- if $paginator.HasPrev -}}
		<li class="pagination-item pagination-prev">
			<a href="{{ $paginator.Prev.URL }}" class="pagination-link" aria-label="Previous page">&larr; Prev</a>
		</li>
		{{- else -}}
		<li class="pagination-item pagination-prev pagination-disabled">
			<span class="pagination-link" aria-disabled="true">&larr; Prev</span>
		</li>
		{{- end -}}

		{{- /* Page numbers */ -}}
		{{- $currentPage := $paginator.PageNumber -}}
		{{- $totalPages := $paginator.TotalPages -}}
		{{- range $paginator.Pagers -}}
			{{- $pageNum := .PageNumber -}}
			{{- /* Show first, last, current, and pages near current */ -}}
			{{- $showPage := or (eq $pageNum 1) (eq $pageNum $totalPages) (and (ge $pageNum (sub $currentPage 1)) (le $pageNum (add $currentPage 1))) -}}
			{{- $showEllipsis := or (eq $pageNum 2) (eq $pageNum (sub $totalPages 1)) -}}
			{{- if $showPage -}}
		<li class="pagination-item{{ if eq $pageNum $currentPage }} pagination-current{{ end }}">
			{{- if eq $pageNum $currentPage -}}
			<span class="pagination-link" aria-current="page">{{ $pageNum }}</span>
			{{- else -}}
			<a href="{{ .URL }}" class="pagination-link">{{ $pageNum }}</a>
			{{- end -}}
		</li>
			{{- else if $showEllipsis -}}
				{{- /* Show ellipsis for gaps, but only if there's actually a gap */ -}}
				{{- if and (eq $pageNum 2) (gt $currentPage 3) -}}
		<li class="pagination-item pagination-ellipsis"><span>&hellip;</span></li>
				{{- else if and (eq $pageNum (sub $totalPages 1)) (lt $currentPage (sub $totalPages 2)) -}}
		<li class="pagination-item pagination-ellipsis"><span>&hellip;</span></li>
				{{- end -}}
			{{- end -}}
		{{- end -}}

		{{- /* Next page link */ -}}
		{{- if $paginator.HasNext -}}
		<li class="pagination-item pagination-next">
			<a href="{{ $paginator.Next.URL }}" class="pagination-link" aria-label="Next page">Next &rarr;</a>
		</li>
		{{- else -}}
		<li class="pagination-item pagination-next pagination-disabled">
			<span class="pagination-link" aria-disabled="true">Next &rarr;</span>
		</li>
		{{- end -}}
	</ul>
</nav>
{{- end -}}
